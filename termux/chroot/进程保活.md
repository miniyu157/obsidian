#### 启动服务，查看进程 PID 与调度策略

```bash
sudo /usr/bin/sshd
sudo pidof sshd
# 示例输出：15125

sudo cat /proc/15125/cgroup
```

输出：

```
5:freezer:/
4:memory:/apps
3:cpuset:/top-app
2:cpu:/top-app
1:blkio:/
0::/
```

说明该进程当前仍处于 Android 的前台应用调度组（`/top-app`），
屏幕关闭后系统可能会将其降权或冻结

---

#### 将进程从应用调度组迁移到系统级调度组

> [!NOTE]
> 必须在宿主系统的 **root shell** 中执行此步骤
> 在 chroot 内执行可能无效，因为挂载命名空间和 SELinux 限制会阻止跨层操作

```bash
for cg in /dev/cpuset /dev/cpuctl /sys/fs/cgroup/cpuset /sys/fs/cgroup/cpu; do
  if [ -d "$cg" ]; then
    echo 15125 > "$cg/tasks" 2>/dev/null
  fi
done
```

该命令会将进程 **从 Android 应用层的调度组移入内核根调度组（`/`）**，
使其不再受 Android ActivityManagerService 的冻结与后台限制

---

#### 验证迁移结果

```bash
cat /proc/15125/cgroup
```

输出示例：

```
5:freezer:/
4:memory:/apps
3:cpuset:/
2:cpu:/
1:blkio:/
0::/
```

此时 `cpuset` 与 `cpu` 项路径均为 `/`，
说明该进程已成功移入系统级调度组，
不会因屏幕关闭而暂停或降权
